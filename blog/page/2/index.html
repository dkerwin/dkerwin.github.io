
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>linuxaddicted.de</title>
  <meta name="author" content="Daniel Kerwin">

  
  <meta name="description" content="This is a small example on flock. It may help you to prevent multiple running instances of the same script. Assume you run the script via cron and it &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dkerwin.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="linuxaddicted.de" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <a href="https://github.com/dkerwin"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"></a>

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3008794-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">linuxaddicted.de</a></h1>
  
    <h2>Linux | Dev | Ops</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dkerwin.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="https://github.com/dkerwin/">Code</a></li>
  <li><a href="/blog/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/10/perl-use-of-flock/">Perl: Use of Flock</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-10T20:45:00+01:00" pubdate data-updated="true">Dec 10<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a small example on flock. It may help you to prevent multiple running instances of the same script. Assume you run the script via cron and it may not be finished when cron attempts to start it again. This few lines of code solve this issue.</p>

<figure class='code'><figcaption><span>flock example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">open</span><span class="p">(</span> <span class="n">LOCK</span><span class="p">,</span> <span class="s">&quot;&gt;/var/run/my_app.lock&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Failed to open lock file: $!\n&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">## Create exclusive, non blocking lock: LOCK_EX(2) + LOCK_NB(4)</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">flock</span><span class="p">(</span> <span class="n">LOCK</span><span class="p">,</span> <span class="mi">6</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nb">close</span><span class="p">(</span> <span class="n">LOCK</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">open</span><span class="p">(</span> <span class="n">PID</span><span class="p">,</span> <span class="s">&quot;&lt;/var/run/my_app.pid&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;Failed to read PID file: $!\n&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">my</span> <span class="nv">$pid</span> <span class="o">=</span> <span class="sr">&lt;PID&gt;</span><span class="p">;</span>
</span><span class='line'>    <span class="nb">close</span><span class="p">(</span> <span class="n">PID</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="s">&quot;Failed to accquire lock. Another instance (PID $pid) running!\n&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">open</span><span class="p">(</span> <span class="n">PID</span><span class="p">,</span> <span class="s">&quot;&gt;/var/run/my_app.pid&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;Failed to open pid file: $!\n&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">print</span> <span class="n">PID</span> <span class="vg">$$</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">close</span><span class="p">(</span> <span class="n">PID</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;Failed to write PID file: $!\n&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/10/portage-patch-existing-perl-module-ebuild-by-using-a-overlay/">Portage: Patch Existing Perl Module Ebuild by Using a Overlay</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-10T00:00:00+01:00" pubdate data-updated="true">Dec 10<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You may have had the same issue as i some time ago. You install a perl module from Portage but you have to modify the module&rsquo;s code. Of course you don&rsquo;t want to patch and install manually. Assuming the module is named &ldquo;foobar&rdquo; here&rsquo;s how i solved it:</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2008/12/10/portage-patch-existing-perl-module-ebuild-by-using-a-overlay/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/03/useful-bash-setting-ignore-duplicate-commands/">Useful BASH Setting: Ignore Duplicate Commands</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-03T00:00:00+01:00" pubdate data-updated="true">Dec 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There are many settings that make BASH even more usable. As many people doesn&rsquo;t seem to know this particular parameter i post it here:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">HISTCONTROL</span><span class="o">=</span><span class="s2">&quot;ignoredups&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This setting in bashrc or profile makes BASH ignore duplicate commands when searching the history. It&rsquo;s pretty useful if you had entered the same command several times.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/03/gentoo-unmerging-software-including-configs-and-data/">Gentoo: Unmerging Software Including Configs and Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-03T00:00:00+01:00" pubdate data-updated="true">Dec 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you&rsquo;re unmerging software in Gentoo some files stay on your server. This is a result of the setting CONFIG_PROTECT.
To unmerge a package completely use this command:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">CONFIG_PROTECT</span><span class="o">=</span><span class="s2">&quot;&quot;</span> emerge -C <span class="o">[</span>SOFTWARE<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/02/qualcomm-msm6275-umts-vodafone-card/">Qualcomm MSM6275 UMTS Vodafone Card</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-02T13:25:00+01:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Preferences</h2>

<p>First of all make sure UMTS card is recognized by your system. You need PCMCIA support enabled in your kernel. If you compiled it as modules load the modules.</p>

<figure class='code'><figcaption><span>Device check </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>deathstar ~ # lspci
</span><span class='line'>...
</span><span class='line'>04:00.0 Network controller: Option N.V. Qualcomm MSM6275 UMTS chip
</span><span class='line'>...</span></code></pre></td></tr></table></div></figure>


<h2>Nozomi &ndash; card access</h2>

<p>Download und build the Nozomi kernel module. You can get it <strong><a href="http://www.pharscape.org/component/option,com_forum/Itemid,69/page,viewforum/f,5/">here</a></strong></p>

<figure class='code'><figcaption><span>Nozomi install </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd nozomi_2.21alpha_060917
</span><span class='line'>mkdir -p /lib/modules/KERNEL_VERSION/kernel/drivers/pci/hotplug (if it doesn't exists)
</span><span class='line'>make
</span><span class='line'>depmod
</span><span class='line'>modprobe nozomi</span></code></pre></td></tr></table></div></figure>


<p>After you succeeded in loading the nozomi module you should see something like this in dmesg:</p>

<figure class='code'><figcaption><span>dmesg </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nozomi 0000:04:00.0: Nozomi driver nozomi_tty
</span><span class='line'>Initializing Nozomi driver 2.21alpha (build date: Jun  9 2008 15:00:29)
</span><span class='line'>nozomi 0000:04:00.0: Version of card: 3
</span><span class='line'>nozomi 0000:04:00.0: Initialization OK!</span></code></pre></td></tr></table></div></figure>


<h2>PPP Configuration</h2>

<p>You have to supply the PIN to your SIM-card. There are two ways to accomplish this:</p>

<ul>
<li>Add <code>AT+CPIN=MY_SIM_PIN</code> to your chat script</li>
<li>Use a little Perl script (for example if you use a PIN app)</li>
</ul>


<figure class='code'><figcaption><span>Perl helper </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='perl'><span class='line'><span class="c1">#!/usr/bin/perl</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="n">strict</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="n">warnings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$SIG</span><span class="p">{</span><span class="n">ALRM</span><span class="p">}</span> <span class="o">=</span> <span class="k">sub </span><span class="p">{</span> <span class="nb">die</span><span class="p">(</span><span class="s">&quot;timeout: no response from modem $modem\n&quot;</span><span class="p">);</span> <span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="k">my</span> <span class="err">ยง</span><span class="n">pin</span>   <span class="o">=</span> <span class="nb">shift</span><span class="p">;</span>
</span><span class='line'><span class="k">my</span> <span class="nv">$modem</span> <span class="o">=</span> <span class="s">&#39;/dev/noz0&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">open</span><span class="p">(</span><span class="n">MODEM</span><span class="p">,</span> <span class="s">&quot;+&lt;&quot;</span><span class="p">,</span> <span class="nv">$modem</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">die</span><span class="p">(</span><span class="s">&quot;Failed to open modem $modem: $!&quot;</span><span class="p">);</span>
</span><span class='line'><span class="k">print</span><span class="p">(</span><span class="n">MODEM</span> <span class="s">&quot;AT+CPIN=\&quot;$pin\&quot;\n\r&quot;</span><span class="p">);</span>
</span><span class='line'><span class="k">while</span> <span class="p">(</span><span class="sr">&lt;MODEM&gt;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="sr">m/OK/</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nb">close</span><span class="p">(</span><span class="n">MODEM</span><span class="p">);</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="s">&quot;PIN accepted\n&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="sr">m/ERROR/</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nb">close</span><span class="p">(</span><span class="n">MODEM</span><span class="p">);</span>
</span><span class='line'>        <span class="k">print</span><span class="p">(</span><span class="s">&quot;PIN rejected\n&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now it&rsquo;s time to create the PPP config and chat scripts.</p>

<figure class='code'><figcaption><span>/etc/ppp/peers/umts </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># Most GPRS phones don't reply to LCP echo's
</span><span class='line'>lcp-echo-failure 0
</span><span class='line'>lcp-echo-interval 0
</span><span class='line'># Keep pppd attached to the terminal:
</span><span class='line'># Comment this to get daemon mode pppd
</span><span class='line'>nodetach
</span><span class='line'># Debug info from pppd:
</span><span class='line'># Comment this off, if you don't need more info
</span><span class='line'>debug
</span><span class='line'># Connect script:
</span><span class='line'># scripts to initialize the UMTS modem and start the connection,
</span><span class='line'>connect /etc/ppp/peers/umts-connect-chat
</span><span class='line'># Disconnect script:
</span><span class='line'># AT commands used to 'hangup' the UMTS connection.
</span><span class='line'>disconnect /etc/ppp/peers/umts-disconnect-chat
</span><span class='line'># Serial device to which the UMTS card is connected:
</span><span class='line'>/dev/noz0
</span><span class='line'># Serial port line speed
</span><span class='line'>115200
</span><span class='line'># Hardware flow control:
</span><span class='line'># Use hardware flow control with cable, Bluetooth and USB but not with IrDA.
</span><span class='line'>crtscts  # serial cable, Bluetooth and USB, on some occations with IrDA too
</span><span class='line'>#nocrtscts # IrDA
</span><span class='line'># Ignore carrier detect signal from the modem:
</span><span class='line'>local
</span><span class='line'># IP addresses:
</span><span class='line'># - accept peers idea of our local address and set address peer as 10.0.0.1
</span><span class='line'># (any address would do, since IPCP gives 0.0.0.0 to it)
</span><span class='line'># - if you use the 10. network at home or something and pppd rejects it,
</span><span class='line'># change the address to something else
</span><span class='line'>0.0.0.0:0.0.0.0
</span><span class='line'># pppd must not propose any IP address to the peer!
</span><span class='line'>noipdefault
</span><span class='line'># Accept peers idea of our local address
</span><span class='line'>ipcp-accept-local
</span><span class='line'># Add the ppp interface as default route to the IP routing table
</span><span class='line'>defaultroute
</span><span class='line'># DNS servers from the phone:
</span><span class='line'># some phones support this, some don't.
</span><span class='line'>usepeerdns
</span><span class='line'># ppp compression:
</span><span class='line'># ppp compression may be used between the phone and the pppd, but the
</span><span class='line'># serial connection is usually not the bottleneck in GPRS, so the
</span><span class='line'># compression is useless (and with some phones need to disabled before
</span><span class='line'># the LCP negotiations succeed).
</span><span class='line'>novj
</span><span class='line'>nobsdcomp
</span><span class='line'>novjccomp
</span><span class='line'>nopcomp
</span><span class='line'>noaccomp
</span><span class='line'># The phone is not required to authenticate:
</span><span class='line'>noauth
</span><span class='line'>mtu 1500
</span><span class='line'>mru 1500</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>/etc/ppp/peers/umts-connect-chat </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>exec chat             \
</span><span class='line'>  TIMEOUT   5       \
</span><span class='line'>  ECHO    ON        \
</span><span class='line'>  ABORT   '\nBUSY\r'      \
</span><span class='line'>  ABORT   '\nERROR\r'     \
</span><span class='line'>  ABORT   '\nNO ANSWER\r'     \
</span><span class='line'>  ABORT   '\nNO CARRIER\r'    \
</span><span class='line'>  ABORT   '\nNO DIALTONE\r'   \
</span><span class='line'>  ABORT   '\nRINGING\r\n\r\nRINGING\r'  \
</span><span class='line'>  ''    \rAT        \
</span><span class='line'>  TIMEOUT   12        \
</span><span class='line'>  SAY   "Press CTRL-C to close the connection at any stage!"  \
</span><span class='line'>  SAY   "\ndefining PDP context...\n" \
</span><span class='line'>  OK    ATH       \
</span><span class='line'>  OK    ATE1        \
</span><span class='line'>  OK    'AT+CGDCONT=1,"IP","web.vodafone.de","",0,0'  \
</span><span class='line'>  OK    ATD*99#       \
</span><span class='line'>  TIMEOUT   22        \
</span><span class='line'>  SAY   "\nwaiting for connect...\n"  \
</span><span class='line'>  CONNECT   ""        \
</span><span class='line'>  SAY   "\nConnected." \
</span><span class='line'>  SAY   "\nIf the following ppp negotiations fail,\n" \
</span><span class='line'>  SAY   "try restarting the phone.\n"</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>/etc/ppp/peers/umts-disconnect-chat </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>exec /usr/sbin/chat -V -s -S  \
</span><span class='line'>ABORT   "BUSY"    \
</span><span class='line'>ABORT   "ERROR"   \
</span><span class='line'>ABORT   "NO DIALTONE" \
</span><span class='line'>SAY   "\nSending break to the modem\n"  \
</span><span class='line'>""    "\K"    \
</span><span class='line'>""    "+++ATH"  \
</span><span class='line'>SAY   "\nPDP context detached\n"</span></code></pre></td></tr></table></div></figure>


<h2>Time to go online</h2>

<figure class='code'><figcaption><span>Connect </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>deathstar ~ # pppd call gprs
</span><span class='line'>Press CTRL-C to close the connection at any stage!
</span><span class='line'>defining PDP context...
</span><span class='line'>AT
</span><span class='line'>OK
</span><span class='line'>ATH
</span><span class='line'>OK
</span><span class='line'>ATE1
</span><span class='line'>OK
</span><span class='line'>AT+CGDCONT=1,"IP","web.vodafone.de","",0,0
</span><span class='line'>OK
</span><span class='line'>waiting for connect...
</span><span class='line'>ATD*99#
</span><span class='line'>CONNECT
</span><span class='line'>Connected.
</span><span class='line'>If the following ppp negotiations fail,
</span><span class='line'>try restarting the phone.
</span><span class='line'>Serial connection established.
</span><span class='line'>using channel 1
</span><span class='line'>Using interface ppp0
</span><span class='line'>Connect: ppp0 &lt;--> /dev/noz0
</span><span class='line'>sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0> &lt;magic 0x9aa17e40>]
</span><span class='line'>rcvd [LCP ConfReq id=0x0 &lt;asyncmap 0x0> &lt;auth chap MD5> &lt;magic 0x90ae7a2e> &lt;pcomp> &lt;accomp>]
</span><span class='line'>No auth is possible
</span><span class='line'>sent [LCP ConfRej id=0x0 &lt;auth chap MD5> &lt;pcomp> &lt;accomp>]
</span><span class='line'>rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0> &lt;magic 0x9aa17e40>]
</span><span class='line'>rcvd [LCP ConfReq id=0x1 &lt;asyncmap 0x0> &lt;magic 0x90ae7a2e>]
</span><span class='line'>sent [LCP ConfAck id=0x1 &lt;asyncmap 0x0> &lt;magic 0x90ae7a2e>]
</span><span class='line'>sent [CCP ConfReq id=0x1 &lt;deflate 15> &lt;deflate(old#) 15>]
</span><span class='line'>sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0> &lt;ms-dns1 0.0.0.0> &lt;ms-dns3 0.0.0.0>]
</span><span class='line'>rcvd [LCP DiscReq id=0x2 magic=0x90ae7a2e]
</span><span class='line'>rcvd [LCP ProtRej id=0x3 80 fd 01 01 00 0c 1a 04 78 00 18 04 78 00]
</span><span class='line'>rcvd [IPCP ConfNak id=0x1 &lt;ms-dns1 10.11.12.13> &lt;ms-dns3 10.11.12.14> &lt;ms-wins 10.11.12.13> &lt;ms-wins 10.11.12.14>]
</span><span class='line'>sent [IPCP ConfReq id=0x2 &lt;addr 0.0.0.0> &lt;ms-dns1 10.11.12.13> &lt;ms-dns3 10.11.12.14>]
</span><span class='line'>rcvd [IPCP ConfNak id=0x2 &lt;ms-dns1 10.11.12.13> &lt;ms-dns3 10.11.12.14> &lt;ms-wins 10.11.12.13> &lt;ms-wins 10.11.12.14>]
</span><span class='line'>sent [IPCP ConfReq id=0x3 &lt;addr 0.0.0.0> &lt;ms-dns1 10.11.12.13> &lt;ms-dns3 10.11.12.14>]
</span><span class='line'>rcvd [IPCP ConfNak id=0x3 &lt;ms-dns1 10.11.12.13> &lt;ms-dns3 10.11.12.14> &lt;ms-wins 10.11.12.13> &lt;ms-wins 10.11.12.14>]
</span><span class='line'>sent [IPCP ConfReq id=0x4 &lt;addr 0.0.0.0> &lt;ms-dns1 10.11.12.13> &lt;ms-dns3 10.11.12.14>]
</span><span class='line'>rcvd [IPCP ConfReq id=0x0]
</span><span class='line'>sent [IPCP ConfNak id=0x0 &lt;addr 0.0.0.0>]
</span><span class='line'>rcvd [IPCP ConfNak id=0x4 &lt;addr 77.24.36.100> &lt;ms-dns1 139.7.30.125> &lt;ms-dns3 139.7.30.126>]
</span><span class='line'>sent [IPCP ConfReq id=0x5 &lt;addr 77.24.36.100> &lt;ms-dns1 139.7.30.125> &lt;ms-dns3 139.7.30.126>]
</span><span class='line'>rcvd [IPCP ConfAck id=0x5 &lt;addr 77.24.36.100> &lt;ms-dns1 139.7.30.125> &lt;ms-dns3 139.7.30.126>]
</span><span class='line'>rcvd [IPCP ConfReq id=0x1]
</span><span class='line'>sent [IPCP ConfAck id=0x1]
</span><span class='line'>Could not determine remote IP address: defaulting to 10.64.64.64
</span><span class='line'>local  IP address 77.24.36.100
</span><span class='line'>remote IP address 10.64.64.64
</span><span class='line'>primary   DNS address 139.7.30.125
</span><span class='line'>secondary DNS address 139.7.30.126
</span><span class='line'>Script /etc/ppp/ip-up started (pid 8494)
</span><span class='line'>Script /etc/ppp/ip-up finished (pid 8494), status = 0x1</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s it!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/12/02/bigip-client-certificates/">BigIP Client Certificates</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-12-02T11:14:00+01:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This howto will show you how to use client certificates to authenticate against applications hosted by a BigIP loadbalancer. You may find this howto (or parts of it) on <a href="http://ask.f5.com">ask.f5.com</a> as they was no documentation before on this topic. I forwarded it to F5 some time ago. <strong>This is the only way to use client certificates without purchasing addon modules from F5.</strong></p>

<h3>Purpose</h3>

<p>If you host a website/application which should only be accessible by some users you you may have already thought about client certificates. This makes brute force attacks against login panels impossible.
This increases the overall application security by adding another layer a user must pass.</p>

<p>The mapping between certificates and access rights is based on a LDAP directory.</p>

<h3>Overview</h3>

<p>The loadbalancer reads the CN from the client certificate and searches the defined group for the virtual server for a matching entry. The loadbalancer verifies CA and CRL&rsquo;s before the lookup takes place.</p>

<p><img class="center" src="/images/f5_ldap_auth.png" width="388" height="339" title="BigIP Certificate Auth" ></p>

<h3>LDAP Setup</h3>

<figure class='code'><figcaption><span>Example LDAP tree </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dc=company,dc=com
</span><span class='line'>   /         \
</span><span class='line'>  /           \
</span><span class='line'>...      ou=datacenter
</span><span class='line'>           /        \
</span><span class='line'>          /          \
</span><span class='line'>        ...       ou=webauth
</span><span class='line'>                   /    \
</span><span class='line'>                  /      \
</span><span class='line'>            ou=users    ou=groups</span></code></pre></td></tr></table></div></figure>


<h4>User &amp; Group LDIF</h4>

<p>Here are two LDIF examples for users and groups:</p>

<figure class='code'><figcaption><span>User LDIF </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dn: cn=Example User,ou=users,ou=webauth,ou=datacenter,dc=company,dc=com
</span><span class='line'>cn: Example User
</span><span class='line'>sn: Example User
</span><span class='line'>objectClass: person
</span><span class='line'>description: It's just a example user</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Group LDIF </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dn: cn=Example Group,ou=groups,ou=webauth,ou=datacenter,dc=company,dc=com
</span><span class='line'>cn: Example Group
</span><span class='line'>objectClass: posixGroup
</span><span class='line'>description: Group is allowed to connect to BigIP's VHOST secure.company.com
</span><span class='line'>memberUid: cn=Example User,ou=users,ou=webauth,ou=datacenter,dc=company,dc=com
</span><span class='line'>memberUid: cn=Example User No2,ou=users,ou=webauth,ou=datacenter,dc=company,dc=com
</span><span class='line'>gidNumber: 145</span></code></pre></td></tr></table></div></figure>


<p>The &ldquo;memberUid&rdquo; has to match exactly the certificates CN because this is the key the BigIP is looking for.</p>

<h3>BigIP Configuration</h3>

<h4>Authentication Configuration</h4>

<p>As a first step we create a new &ldquo;Authentication Configuration&rdquo;. Just open the web frontend and navigate to:</p>

<p><code>Local Traffic</code> &rarr; <code>Profiles</code> &rarr; <code>Authentication</code> &rarr; <code>Configuration</code></p>

<p>You have to create a new config for every virtual host you want to secure. This is force by the LDAP group used because every config can only use one group. Here&rsquo;s a example configuration:</p>

<figure class='code'><figcaption><span>Authentication Configuration </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Parameter        | Value
</span><span class='line'>==========================================================================
</span><span class='line'>Hosts            | 1.2.3.4
</span><span class='line'>Search Type      | User
</span><span class='line'>User Base        | DNou=users,ou=webauth,ou=datacenter,dc=company,dc=com
</span><span class='line'>User Key         | cn
</span><span class='line'>Admin DN         | DN for binding
</span><span class='line'>Admin Password   | Bind password
</span><span class='line'>Group Base DN    | ou=groups,ou=webauth,ou=datacenter,dc=company,dcc=com
</span><span class='line'>Group Key        | cn
</span><span class='line'>Group Member Key | memberUid
</span><span class='line'>Valid Groups     | Corresponding LDAP group</span></code></pre></td></tr></table></div></figure>


<h3>Authentication Profile</h3>

<p>The next step is to create a profile which inherits the new created config. You need a profile for every configuration. Navigate to</p>

<p><code>Local Traffic</code> &rarr; <code>Profiles</code> &rarr; <code>Authentication</code> &rarr; <code>Profiles</code></p>

<figure class='code'><figcaption><span>Authentication Profile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Parameter      | Value
</span><span class='line'>==========================================================================
</span><span class='line'>Type           | SSL Client Certificate LDAP
</span><span class='line'>Parent Profile | ssl_cc_ldap
</span><span class='line'>Mode           | Enabled
</span><span class='line'>Configuration  | NAME OF CONF JUST CREATED</span></code></pre></td></tr></table></div></figure>


<h3>CA Upload</h3>

<p>If your CA certificate(s) have not been installed it&rsquo;s time to do so.</p>

<p><code>Local Traffic</code> &rarr; <code>SSL Certificates</code> &rarr; <code>Import</code></p>

<h3>SSL Profiles</h3>

<p>To use SSL (without client certificates too) you need a SSL profile. Navigate to</p>

<p><code>Local Traffic</code> &rarr; <code>Profiles</code> &rarr; <code>SSL</code> &rarr; <code>Client</code></p>

<p>Create a new profile based on &ldquo;clientssl&rdquo; or one of your already defined profiles.</p>

<figure class='code'><figcaption><span>SSL Client </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Parameter                          | Value
</span><span class='line'>==========================================================================
</span><span class='line'>Chain                              | CompanyBundle
</span><span class='line'>Trusted Certificate Authorities    | CompanyBundle
</span><span class='line'>Client Certificate                 | require
</span><span class='line'>Frequency                          | always
</span><span class='line'>Advertised Certificate Authorities | CompanyBundle</span></code></pre></td></tr></table></div></figure>


<h3>Virtual Host Configuration</h3>

<p>You may create a new virtual host or modify a existing host. Navigate here</p>

<p><code>Local Traffic</code> &rarr; <code>Virtual Servers</code></p>

<p>Modify the following parameters (if you already used SSL in this vhost):</p>

<figure class='code'><figcaption><span>Virtual Servers </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Parameter               | Value
</span><span class='line'>==========================================================================
</span><span class='line'>SSL Profile (Client)    | Profile created earlier
</span><span class='line'>Authentication Profiles | Profile created earlier</span></code></pre></td></tr></table></div></figure>


<h3>That&rsquo;s it!</h3>

<p>Import your client certificates to your browser and enjoy your secure connection.</p>

<p>If you have any trouble don&rsquo;t hesitate to contact me: daniel {A_T} linuxaddicted {D_O_T} de</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/10/27/postfix-relay-based-on-openldap/">Postfix Relay Based on OpenLDAP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-27T14:01:00+01:00" pubdate data-updated="true">Oct 27<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This howto describes the configuration of a Postfix relay based on OpenLDAP. These are the features of the relay:</p>

<ul>
<li>User verification through LDAP</li>
<li>Separation on internal and external users</li>
<li>Greylisting</li>
<li>User Relaying based on TLS and LDAP authentication</li>
<li>Forwarding to local mailserver</li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2008/10/27/postfix-relay-based-on-openldap/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/10/27/ha-linux-router/">HA Linux Router</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-27T10:36:00+01:00" pubdate data-updated="true">Oct 27<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This howto describes the setup of a HA Linux router based on Gentoo and Keepalived. I&rsquo;m writing this because there&rsquo;s not really a good documentation on this topic so far. At least as i searched for it.</p>

<h3>Requirements</h3>

<p>The intended router requires this config and tools:</p>

<ul>
<li>Kernel with activcated VLAN support(CONFIG_VLAN_8021Q=y)</li>
<li>Keepalived installed</li>
<li>vconfig installed</li>
<li>Optionally bonding support in Kernel and ifenslave installed</li>
</ul>


<h3>Network Configuration</h3>

<p>This configuration example is designed for 8 NIC&rsquo;s and 20 VLAN&rsquo;s. The following config is split to make it more readable but belongs completely to /etc/conf.d/net.</p>

<p><strong>VLAN-Interface-Mapping</strong></p>

<p><em>Depending on your network and traffic you have to find a VLAN-interface-mapping that matches your environment.</em></p>

<figure class='code'><figcaption><span>/etc/conf.d/net - part 1 </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#######################################################</span>
</span><span class='line'><span class="c">## VLAN &lt;--&gt; Interface Mapping</span>
</span><span class='line'><span class="c">#######################################################</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth0: VLAN 20 - 22</span>
</span><span class='line'><span class="nv">vlans_eth0</span><span class="o">=</span><span class="s2">&quot;20 21 22&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth1: VLAN 22</span>
</span><span class='line'><span class="nv">vlans_eth1</span><span class="o">=</span><span class="s2">&quot;22&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth2: VLAN 23 - 24</span>
</span><span class='line'><span class="nv">vlans_eth2</span><span class="o">=</span><span class="s2">&quot;23 24&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth3: VLAN 25 26 27 28</span>
</span><span class='line'><span class="nv">vlans_eth3</span><span class="o">=</span><span class="s2">&quot;25 26 27 28&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth4: VLAN 29</span>
</span><span class='line'><span class="nv">vlans_eth4</span><span class="o">=</span><span class="s2">&quot;29&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth5: VLAN 30 - 34</span>
</span><span class='line'><span class="nv">vlans_eth5</span><span class="o">=</span><span class="s2">&quot;30 31 32 33 34&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth6: VLAN 35 - 38 </span>
</span><span class='line'><span class="nv">vlans_eth6</span><span class="o">=</span><span class="s2">&quot;35 36 37 38&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## eth7: VLAN 39 - 40</span>
</span><span class='line'><span class="nv">vlans_eth7</span><span class="o">=</span><span class="s2">&quot;39 40&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>VLAN Settings</strong></p>

<p>This  VLAN setup will lead to interfaces named vlanXX. See the manpage of vconfig if you prefer a different setup. Then it&rsquo;s time to disable the &ldquo;parent interfaces&rdquo;. You can&rsquo;t use a interface in mixed mode: VLAN&rsquo;s <strong>or</strong> single interface.</p>

<figure class='code'><figcaption><span>/etc/conf.d/net - part 2 </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#######################################################</span>
</span><span class='line'><span class="c">## VLAN Interface naming scheme</span>
</span><span class='line'><span class="c">#######################################################</span>
</span><span class='line'>
</span><span class='line'><span class="nv">vconfig_eth0</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">vconfig_eth1</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">vconfig_eth2</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">vconfig_eth3</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">vconfig_eth4</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">vconfig_eth5</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">vconfig_eth6</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">vconfig_eth7</span><span class="o">=(</span> <span class="s2">&quot;set_name_type VLAN_PLUS_VID_NO_PAD&quot;</span> <span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c">#######################################################</span>
</span><span class='line'><span class="c">## Disable interfaces for &quot;normal&quot; use</span>
</span><span class='line'><span class="c">#######################################################</span>
</span><span class='line'>
</span><span class='line'><span class="nv">config_eth0</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_eth1</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_eth2</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_eth3</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_eth4</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_eth5</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_eth6</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_eth7</span><span class="o">=(</span> <span class="s2">&quot;null&quot;</span> <span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>IP Adresses</strong></p>

<p>Now it&rsquo;s time to assign addresses to our VLAN interfaces. I myself prefer the last 3 adresses of every subnet as router addresses.</p>

<figure class='code'><figcaption><span>/etc/conf.d/net - part 3 </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-
</span><span class='line'>-            192.168.45.0/25
</span><span class='line'>-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-
</span><span class='line'>- Router-VIP  <span class="o">==</span>&gt; 192.168.45.254 Cluster IP
</span><span class='line'>- Router-A    <span class="o">==</span>&gt; 192.168.45.253 Real-IP Node A
</span><span class='line'>- Router-B    <span class="o">==</span>&gt; 192.168.45.252 Real-IP Node B
</span><span class='line'>
</span><span class='line'><span class="nv">config_vlan20</span><span class="o">=(</span> <span class="s2">&quot;10.1.20.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan21</span><span class="o">=(</span> <span class="s2">&quot;10.1.21.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan22</span><span class="o">=(</span> <span class="s2">&quot;10.1.22.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan23</span><span class="o">=(</span> <span class="s2">&quot;10.1.23.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan24</span><span class="o">=(</span> <span class="s2">&quot;10.1.24.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan25</span><span class="o">=(</span> <span class="s2">&quot;10.1.25.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan26</span><span class="o">=(</span> <span class="s2">&quot;10.1.26.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan27</span><span class="o">=(</span> <span class="s2">&quot;10.1.27.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan28</span><span class="o">=(</span> <span class="s2">&quot;10.1.28.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan29</span><span class="o">=(</span> <span class="s2">&quot;10.1.29.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'><span class="nv">config_vlan30</span><span class="o">=(</span> <span class="s2">&quot;10.1.30.0/24&quot;</span> <span class="o">)</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p><strong>Routing</strong></p>

<p>If you&rsquo;re familiar with Gentoo&rsquo;s routing syntax you shouldn&rsquo;t be surprised to see how it works.</p>

<figure class='code'><figcaption><span>/etc/conf.d/net - part 4 </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">routes_vlan21</span><span class="o">=(</span><span class="s2">&quot;192.168.99.0/27 via 10.1.21.5&quot;</span><span class="o">)</span>
</span><span class='line'><span class="nv">routes_vlan31</span><span class="o">=(</span><span class="s2">&quot;default via 10.1.31.1&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Keepalived Configuration</h3>

<figure class='code'><figcaption><span>/etc/keepalived/keepalived.conf - MASTER </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">## Unique identifier for every router</span>
</span><span class='line'>global_defs <span class="o">{</span>
</span><span class='line'>   router_id router-a
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Sync Group</span>
</span><span class='line'>vrrp_sync_group SG_A <span class="o">{</span>
</span><span class='line'>  group <span class="o">{</span>
</span><span class='line'>          VI_21 <span class="c"># VLAN 21</span>
</span><span class='line'>          VI_22 <span class="c"># VLAN 22</span>
</span><span class='line'>          VI_23 <span class="c"># VLAN 23</span>
</span><span class='line'>          VI_24 <span class="c"># VLAN 24</span>
</span><span class='line'>          VI_25 <span class="c"># VLAN 25</span>
</span><span class='line'>          VI_26 <span class="c"># VLAN 26</span>
</span><span class='line'>          VI_27 <span class="c"># VLAN 27</span>
</span><span class='line'>          VI_28 <span class="c"># VLAN 28</span>
</span><span class='line'>          VI_29 <span class="c"># VLAN 29</span>
</span><span class='line'>          VI_30 <span class="c"># VLAN 30</span>
</span><span class='line'>          VI_31 <span class="c"># VLAN 31</span>
</span><span class='line'>
</span><span class='line'>          ...
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## VLAN 21</span>
</span><span class='line'>vrrp_instance VI_21 <span class="o">{</span>
</span><span class='line'>    interface vlan21
</span><span class='line'>    state MASTER
</span><span class='line'>    virtual_router_id 21
</span><span class='line'>    priority 80
</span><span class='line'>    advert_int 1
</span><span class='line'>    authentication <span class="o">{</span>
</span><span class='line'>        auth_type PASS
</span><span class='line'>        auth_pass &gt;FreakShow_&lt;
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    virtual_ipaddress <span class="o">{</span>
</span><span class='line'>        10.1.21.254
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## VLAN 22</span>
</span><span class='line'>vrrp_instance VI_22 <span class="o">{</span>
</span><span class='line'>    interface vlan22
</span><span class='line'>    state MASTER
</span><span class='line'>    virtual_router_id 22
</span><span class='line'>    priority 80
</span><span class='line'>    advert_int 1
</span><span class='line'>    authentication <span class="o">{</span>
</span><span class='line'>        auth_type PASS
</span><span class='line'>        auth_pass &gt;FreakShow_&lt;
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    virtual_ipaddress <span class="o">{</span>
</span><span class='line'>        10.1.22.254
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>/etc/keepalived/keepalived.conf - SLAVE </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">## Unique identifier for every router</span>
</span><span class='line'>global_defs <span class="o">{</span>
</span><span class='line'>   router_id router-b
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Sync Group</span>
</span><span class='line'>vrrp_sync_group SG_B <span class="o">{</span>
</span><span class='line'>  group <span class="o">{</span>
</span><span class='line'>          VI_21 <span class="c"># VLAN 21</span>
</span><span class='line'>          VI_22 <span class="c"># VLAN 22</span>
</span><span class='line'>          VI_23 <span class="c"># VLAN 23</span>
</span><span class='line'>          VI_24 <span class="c"># VLAN 24</span>
</span><span class='line'>          VI_25 <span class="c"># VLAN 25</span>
</span><span class='line'>          VI_26 <span class="c"># VLAN 26</span>
</span><span class='line'>          VI_27 <span class="c"># VLAN 27</span>
</span><span class='line'>          VI_28 <span class="c"># VLAN 28</span>
</span><span class='line'>          VI_29 <span class="c"># VLAN 29</span>
</span><span class='line'>          VI_30 <span class="c"># VLAN 30</span>
</span><span class='line'>          VI_31 <span class="c"># VLAN 31</span>
</span><span class='line'>
</span><span class='line'>          ...
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## VLAN 21</span>
</span><span class='line'>vrrp_instance VI_21 <span class="o">{</span>
</span><span class='line'>    interface vlan21
</span><span class='line'>    state SLAVE
</span><span class='line'>    virtual_router_id 21
</span><span class='line'>    priority 50
</span><span class='line'>    advert_int 1
</span><span class='line'>    authentication <span class="o">{</span>
</span><span class='line'>        auth_type PASS
</span><span class='line'>        auth_pass &gt;FreakShow_&lt;
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    virtual_ipaddress <span class="o">{</span>
</span><span class='line'>        10.1.21.254
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## VLAN 22</span>
</span><span class='line'>vrrp_instance VI_22 <span class="o">{</span>
</span><span class='line'>    interface vlan22
</span><span class='line'>    state SLAVE
</span><span class='line'>    virtual_router_id 22
</span><span class='line'>    priority 50
</span><span class='line'>    advert_int 1
</span><span class='line'>    authentication <span class="o">{</span>
</span><span class='line'>        auth_type PASS
</span><span class='line'>        auth_pass &gt;FreakShow_&lt;
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    virtual_ipaddress <span class="o">{</span>
</span><span class='line'>        10.1.22.254
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/03/22/switching-to-octopress/">Switching to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/03/18/puppetmasterd-and-passenger/">Puppetmasterd and Passenger</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/02/01/openvpn-active-slash-active-cluster/">OpenVPN Active/active Cluster</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/12/18/short-review-puppet-for-gentoo-servers/">Short Review: Puppet for Gentoo Servers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/05/27/new-helper-script-svn-updater-using-growl-notifications/">New Helper Script: SVN Updater Using Growl Notifications</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Coderwall Badges</h1>
  <p>
    <script type="text/javascript">
      function display_coderwall(args) {
        var badges = args["data"]["badges"];
        var wall = '';
        for ( var i = 0; i < badges.length; i++ ) {
          var alt_txt = badges[i]["name"];
          var title_txt = badges[i]["name"] + ' - ' + badges[i]["description"];
          wall += '<a href="http://coderwall.com/dkerwin/"><img src="'
            + badges[i]["badge"]
            + '" width="48" height="48" alt="' + alt_txt
            + '" title="' + title_txt
            + '"/></a>';
        }
        document.write(wall);
      }
    </script>
    <script src="http://coderwall.com/dkerwin.json?callback=display_coderwall"></script>
  </p>
  
  <p><a href="http://coderwall.com/dkerwin"><img src="http://api.coderwall.com/dkerwin/endorsecount.png" /></a></p>
  
</section>



<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("linuxaddicted", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/linuxaddicted" class="twitter-follow-button" data-show-count="false">Follow @linuxaddicted</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Daniel Kerwin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> - Page generated at:  2013-05-31 18:27:48 +0200</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'linuxaddicted';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
